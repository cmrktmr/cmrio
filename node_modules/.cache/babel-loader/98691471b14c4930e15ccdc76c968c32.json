{"remainingRequest":"C:\\Users\\Necdet\\whiteboard\\frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Necdet\\whiteboard\\frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\Necdet\\whiteboard\\frontend\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!C:\\Users\\Necdet\\whiteboard\\frontend\\src\\views\\Room.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\Necdet\\whiteboard\\frontend\\src\\views\\Room.vue","mtime":1621594877927},{"path":"C:\\Users\\Necdet\\whiteboard\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Necdet\\whiteboard\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\Necdet\\whiteboard\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Necdet\\whiteboard\\frontend\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1616796459000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:ZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJSb29tIiwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgc29ja2V0OiBudWxsLAogICAgICB4OiAwLAogICAgICB5OiAwLAogICAgICBjYW52YXNXaWR0aDogMCwKICAgICAgY2FudmFzSGVpZ2h0OiAwLAogICAgICBpc0RyYXdpbmc6IGZhbHNlLAogICAgICBjb25uZWN0aW9uOiAiY29ubmVjdGluZyIKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBkcmF3TGluZTogZnVuY3Rpb24gZHJhd0xpbmUoeDEsIHkxLCB4MiwgeTIpIHsKICAgICAgdmFyIGN0eCA9IHRoaXMuJHJlZnMuY2FudmFzLmdldENvbnRleHQoIjJkIik7CiAgICAgIGN0eC5iZWdpblBhdGgoKTsKICAgICAgY3R4LnN0cm9rZVN0eWxlID0gImJsYWNrIjsKICAgICAgY3R4LmxpbmVXaWR0aCA9IDc7CiAgICAgIGN0eC5tb3ZlVG8oeDEsIHkxKTsKICAgICAgY3R4LmxpbmVUbyh4MiwgeTIpOwogICAgICBjdHguc3Ryb2tlKCk7CiAgICAgIGN0eC5jbG9zZVBhdGgoKTsKICAgIH0sCiAgICBkcmF3OiBmdW5jdGlvbiBkcmF3KGUpIHsKICAgICAgaWYgKHRoaXMuaXNEcmF3aW5nKSB7CiAgICAgICAgdGhpcy5kcmF3TGluZSh0aGlzLngsIHRoaXMueSwgZS5vZmZzZXRYLCBlLm9mZnNldFkpOwogICAgICAgIHRoaXMueCA9IGUub2Zmc2V0WDsKICAgICAgICB0aGlzLnkgPSBlLm9mZnNldFk7CiAgICAgIH0KICAgIH0sCiAgICBiZWdpbkRyYXdpbmc6IGZ1bmN0aW9uIGJlZ2luRHJhd2luZyhlKSB7CiAgICAgIHRoaXMueCA9IGUub2Zmc2V0WDsKICAgICAgdGhpcy55ID0gZS5vZmZzZXRZOwogICAgICB0aGlzLmlzRHJhd2luZyA9IHRydWU7CiAgICB9LAogICAgc3RvcERyYXdpbmc6IGZ1bmN0aW9uIHN0b3BEcmF3aW5nKGUpIHsKICAgICAgaWYgKHRoaXMuaXNEcmF3aW5nKSB7CiAgICAgICAgdGhpcy5kcmF3TGluZSh0aGlzLngsIHRoaXMueSwgZS5vZmZzZXRYLCBlLm9mZnNldFkpOwogICAgICAgIHRoaXMuaXNEcmF3aW5nID0gZmFsc2U7CiAgICAgICAgdGhpcy5zb2NrZXQuZW1pdCgiZHJhd2luZyIsIHRoaXMuJHJlZnMuY2FudmFzLnRvRGF0YVVSTCgiaW1hZ2UvcG5nIikpOwogICAgICB9CiAgICB9LAogICAgY2FuY2VsRHJhd2luZzogZnVuY3Rpb24gY2FuY2VsRHJhd2luZygpIHsKICAgICAgdGhpcy5pc0RyYXdpbmcgPSBmYWxzZTsKICAgIH0sCiAgICBkcmF3VXBkYXRlOiBmdW5jdGlvbiBkcmF3VXBkYXRlKHVybCkgewogICAgICB2YXIgaW1hZ2UgPSBuZXcgSW1hZ2UoKTsKICAgICAgdmFyIGN0eCA9IHRoaXMuJHJlZnMuY2FudmFzLmdldENvbnRleHQoIjJkIik7CgogICAgICBpbWFnZS5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgY3R4LmRyYXdJbWFnZShpbWFnZSwgMCwgMCk7CiAgICAgIH07CgogICAgICBpbWFnZS5zcmMgPSB1cmw7CiAgICB9LAogICAgaGFuZGxlUmVzaXplOiBmdW5jdGlvbiBoYW5kbGVSZXNpemUoKSB7CiAgICAgIHZhciBzdGF0ZSA9IHRoaXMuJHJlZnMuY2FudmFzLnRvRGF0YVVSTCgiaW1hZ2UvcG5nIik7CiAgICAgIHRoaXMuY2FudmFzV2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aDsKICAgICAgdGhpcy5jYW52YXNIZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQgLSAyNTsKICAgICAgdGhpcy5kcmF3VXBkYXRlKHN0YXRlKTsKICAgIH0sCiAgICBzZXRDb25uZWN0ZWQ6IGZ1bmN0aW9uIHNldENvbm5lY3RlZCgpIHsKICAgICAgdGhpcy5jb25uZWN0aW9uID0gImNvbm5lY3RlZCI7CiAgICB9LAogICAgY2xlYXJDYW52YXM6IGZ1bmN0aW9uIGNsZWFyQ2FudmFzKCkgewogICAgICB2YXIgY3R4ID0gdGhpcy4kcmVmcy5jYW52YXMuZ2V0Q29udGV4dCgiMmQiKTsKICAgICAgY3R4LmNsZWFyUmVjdCgwLCAwLCB0aGlzLmNhbnZhc1dpZHRoLCB0aGlzLmNhbnZhc0hlaWdodCk7CiAgICAgIHRoaXMuc29ja2V0LmVtaXQoImRyYXdpbmciLCB0aGlzLiRyZWZzLmNhbnZhcy50b0RhdGFVUkwoImltYWdlL3BuZyIpKTsKICAgIH0KICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB2YXIgaW8gPSByZXF1aXJlKCJzb2NrZXQuaW8tY2xpZW50Iik7CgogICAgdGhpcy5zb2NrZXQgPSBpbyhwcm9jZXNzLmVudi5WVUVfQVBQX1NFUlZFUik7CiAgICB0aGlzLnNvY2tldC5lbWl0KCJqb2luLXJvb20iLCB0aGlzLiRyb3V0ZS5wYXJhbXMuaWQpOwogICAgdGhpcy5zb2NrZXQub24oImRyYXdpbmciLCB0aGlzLmRyYXdVcGRhdGUpOwogICAgdGhpcy5zb2NrZXQub24oImpvaW5lZCIsIHRoaXMuc2V0Q29ubmVjdGVkKTsKICAgIHRoaXMuaGFuZGxlUmVzaXplKCk7CiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigicmVzaXplIiwgdGhpcy5oYW5kbGVSZXNpemUpOwogIH0KfTs="},{"version":3,"sources":["C:\\Users\\Necdet\\whiteboard\\frontend\\src\\views\\Room.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div id=\"bg\">\r\n    <canvas\r\n      ref=\"canvas\"\r\n      @mousemove=\"draw\"\r\n      @mousedown=\"beginDrawing\"\r\n      @mouseup=\"stopDrawing\"\r\n      @mouseleave=\"cancelDrawing\"\r\n      :width=\"canvasWidth\"\r\n      :height=\"canvasHeight\"\r\n    />\r\n    <div id=\"bar\">\r\n      <div class=\"bar-item\">\r\n        <router-link to=\"/\">home</router-link>|\r\n        <a href=\"https://github.com/iamsdas/whiteboard\">github</a>|\r\n        <button @click=\"clearCanvas\">clear</button>\r\n      </div>\r\n      <div class=\"bar-item\">status : {{ connection }}</div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"Room\",\r\n  data() {\r\n    return {\r\n      socket: null,\r\n      x: 0,\r\n      y: 0,\r\n      canvasWidth: 0,\r\n      canvasHeight: 0,\r\n      isDrawing: false,\r\n      connection: \"connecting\"\r\n    };\r\n  },\r\n  methods: {\r\n    drawLine(x1, y1, x2, y2) {\r\n      let ctx = this.$refs.canvas.getContext(\"2d\");\r\n      ctx.beginPath();\r\n      ctx.strokeStyle = \"black\";\r\n      ctx.lineWidth = 7;\r\n      ctx.moveTo(x1, y1);\r\n      ctx.lineTo(x2, y2);\r\n      ctx.stroke();\r\n      ctx.closePath();\r\n    },\r\n    draw(e) {\r\n      if (this.isDrawing) {\r\n        this.drawLine(this.x, this.y, e.offsetX, e.offsetY);\r\n        this.x = e.offsetX;\r\n        this.y = e.offsetY;\r\n      }\r\n    },\r\n    beginDrawing(e) {\r\n      this.x = e.offsetX;\r\n      this.y = e.offsetY;\r\n      this.isDrawing = true;\r\n    },\r\n    stopDrawing(e) {\r\n      if (this.isDrawing) {\r\n        this.drawLine(this.x, this.y, e.offsetX, e.offsetY);\r\n        this.isDrawing = false;\r\n        this.socket.emit(\"drawing\", this.$refs.canvas.toDataURL(\"image/png\"));\r\n      }\r\n    },\r\n    cancelDrawing() {\r\n      this.isDrawing = false;\r\n    },\r\n    drawUpdate(url) {\r\n      let image = new Image();\r\n      let ctx = this.$refs.canvas.getContext(\"2d\");\r\n      image.onload = () => {\r\n        ctx.drawImage(image, 0, 0);\r\n      };\r\n      image.src = url;\r\n    },\r\n    handleResize() {\r\n      let state = this.$refs.canvas.toDataURL(\"image/png\");\r\n      this.canvasWidth = window.innerWidth;\r\n      this.canvasHeight = window.innerHeight - 25;\r\n      this.drawUpdate(state);\r\n    },\r\n    setConnected() {\r\n      this.connection = \"connected\";\r\n    },\r\n    clearCanvas() {\r\n      let ctx = this.$refs.canvas.getContext(\"2d\");\r\n      ctx.clearRect(0, 0, this.canvasWidth, this.canvasHeight);\r\n      this.socket.emit(\"drawing\", this.$refs.canvas.toDataURL(\"image/png\"));\r\n    }\r\n  },\r\n  mounted() {\r\n    const io = require(\"socket.io-client\");\r\n    this.socket = io(process.env.VUE_APP_SERVER);\r\n    this.socket.emit(\"join-room\", this.$route.params.id);\r\n    this.socket.on(\"drawing\", this.drawUpdate);\r\n    this.socket.on(\"joined\", this.setConnected);\r\n    this.handleResize();\r\n    window.addEventListener(\"resize\", this.handleResize);\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n* {\r\n  padding: 0;\r\n  margin: 0;\r\n}\r\n#bg {\r\n  background-color: #111;\r\n  height: 100vh;\r\n  width: 100vw;\r\n}\r\n#bar {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  color: white;\r\n  height: 25px;\r\n}\r\n.bar-item {\r\n  align-items: center;\r\n  padding-left: 5px;\r\n  padding-right: 5px;\r\n}\r\nbutton,\r\na {\r\n  background: none;\r\n  text-decoration: none;\r\n  color: inherit;\r\n  border: none;\r\n  padding: 0;\r\n  padding-right: 5px;\r\n  font: inherit;\r\n  cursor: pointer;\r\n  outline: inherit;\r\n}\r\ncanvas {\r\n  background-color: white;\r\n  display: block;\r\n}\r\n</style>\r\n"],"sourceRoot":""}]}