{"remainingRequest":"C:\\Users\\Necdet\\cmrio\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Necdet\\cmrio\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\Necdet\\cmrio\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!C:\\Users\\Necdet\\cmrio\\src\\views\\Room.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\Necdet\\cmrio\\src\\views\\Room.vue","mtime":1621624895161},{"path":"C:\\Users\\Necdet\\cmrio\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Necdet\\cmrio\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\Necdet\\cmrio\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Necdet\\cmrio\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1616796459000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:ZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJSb29tIiwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgc29ja2V0OiBudWxsLAogICAgICB4OiAwLAogICAgICB5OiAwLAogICAgICBjYW52YXNXaWR0aDogMCwKICAgICAgY2FudmFzSGVpZ2h0OiAwLAogICAgICBpc0RyYXdpbmc6IGZhbHNlLAogICAgICBjb25uZWN0aW9uOiAiY29ubmVjdGluZyIsCiAgICAgIG1vdXNlOiBbewogICAgICAgIGNsaWNrOiBmYWxzZSwKICAgICAgICBtb3ZlOiBmYWxzZSwKICAgICAgICBwb3M6IHsKICAgICAgICAgIHg6IDAsCiAgICAgICAgICB5OiAwCiAgICAgICAgfSwKICAgICAgICBwb3NfcHJldjogZmFsc2UKICAgICAgfV0KICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBtYWluTG9vcDogZnVuY3Rpb24gbWFpbkxvb3AoKSB7CiAgICAgIC8vIGNoZWNrIGlmIHRoZSB1c2VyIGlzIGRyYXdpbmcKICAgICAgaWYgKHRoaXMubW91c2UuY2xpY2sgJiYgdGhpcy5tb3VzZS5tb3ZlICYmIHRoaXMubW91c2UucG9zX3ByZXYpIHsKICAgICAgICAvLyBzZW5kIGxpbmUgdG8gdG8gdGhlIHNlcnZlcgogICAgICAgIHRoaXMuc29ja2V0LmVtaXQoJ2RyYXdpbmcnLCB7CiAgICAgICAgICBsaW5lOiBbdGhpcy5tb3VzZS5wb3MsIHRoaXMubW91c2UucG9zX3ByZXZdCiAgICAgICAgfSk7CiAgICAgICAgdGhpcy5tb3VzZS5tb3ZlID0gZmFsc2U7CiAgICAgIH0KCiAgICAgIHRoaXMubW91c2UucG9zX3ByZXYgPSB7CiAgICAgICAgeDogdGhpcy5tb3VzZS5wb3MueCwKICAgICAgICB5OiB0aGlzLm1vdXNlLnBvcy55CiAgICAgIH07CiAgICAgIHNldFRpbWVvdXQodGhpcy5tYWluTG9vcCwgMjUpOwogICAgfSwKICAgIGRyYXdMaW5lOiBmdW5jdGlvbiBkcmF3TGluZSh4MSwgeTEsIHgyLCB5MikgewogICAgICB2YXIgY3R4ID0gdGhpcy4kcmVmcy5jYW52YXMuZ2V0Q29udGV4dCgiMmQiKTsKICAgICAgY3R4LmJlZ2luUGF0aCgpOwogICAgICBjdHguc3Ryb2tlU3R5bGUgPSAiYmxhY2siOwogICAgICBjdHgubGluZVdpZHRoID0gNzsKICAgICAgY3R4Lm1vdmVUbyh4MSwgeTEpOwogICAgICBjdHgubGluZVRvKHgyLCB5Mik7CiAgICAgIGN0eC5zdHJva2UoKTsKICAgICAgY3R4LmNsb3NlUGF0aCgpOwogICAgfSwKICAgIGRyYXc6IGZ1bmN0aW9uIGRyYXcoZSkgewogICAgICBpZiAodGhpcy5pc0RyYXdpbmcpIHsKICAgICAgICB0aGlzLmRyYXdMaW5lKHRoaXMueCwgdGhpcy55LCBlLm9mZnNldFgsIGUub2Zmc2V0WSk7CiAgICAgICAgdGhpcy54ID0gZS5vZmZzZXRYOwogICAgICAgIHRoaXMueSA9IGUub2Zmc2V0WTsKICAgICAgfQogICAgfSwKICAgIGJlZ2luRHJhd2luZzogZnVuY3Rpb24gYmVnaW5EcmF3aW5nKGUpIHsKICAgICAgdGhpcy54ID0gZS5vZmZzZXRYOwogICAgICB0aGlzLnkgPSBlLm9mZnNldFk7CiAgICAgIHRoaXMuaXNEcmF3aW5nID0gdHJ1ZTsKICAgIH0sCiAgICBzdG9wRHJhd2luZzogZnVuY3Rpb24gc3RvcERyYXdpbmcoZSkgewogICAgICBpZiAodGhpcy5pc0RyYXdpbmcpIHsKICAgICAgICB0aGlzLmRyYXdMaW5lKHRoaXMueCwgdGhpcy55LCBlLm9mZnNldFgsIGUub2Zmc2V0WSk7CiAgICAgICAgdGhpcy5pc0RyYXdpbmcgPSBmYWxzZTsKICAgICAgICB0aGlzLnNvY2tldC5lbWl0KCJkcmF3aW5nIiwgdGhpcy4kcmVmcy5jYW52YXMudG9EYXRhVVJMKCJpbWFnZS9wbmciKSk7CiAgICAgIH0KICAgIH0sCiAgICBjYW5jZWxEcmF3aW5nOiBmdW5jdGlvbiBjYW5jZWxEcmF3aW5nKCkgewogICAgICB0aGlzLmlzRHJhd2luZyA9IGZhbHNlOwogICAgfSwKICAgIGRyYXdVcGRhdGU6IGZ1bmN0aW9uIGRyYXdVcGRhdGUodXJsKSB7CiAgICAgIHZhciBpbWFnZSA9IG5ldyBJbWFnZSgpOwogICAgICB2YXIgY3R4ID0gdGhpcy4kcmVmcy5jYW52YXMuZ2V0Q29udGV4dCgiMmQiKTsKCiAgICAgIGltYWdlLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICBjdHguZHJhd0ltYWdlKGltYWdlLCAwLCAwKTsKICAgICAgfTsKCiAgICAgIGltYWdlLnNyYyA9IHVybDsKICAgIH0sCiAgICBoYW5kbGVSZXNpemU6IGZ1bmN0aW9uIGhhbmRsZVJlc2l6ZSgpIHsKICAgICAgdmFyIHN0YXRlID0gdGhpcy4kcmVmcy5jYW52YXMudG9EYXRhVVJMKCJpbWFnZS9wbmciKTsKICAgICAgdGhpcy5jYW52YXNXaWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoOwogICAgICB0aGlzLmNhbnZhc0hlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodCAtIDI1OwogICAgICB0aGlzLmRyYXdVcGRhdGUoc3RhdGUpOwogICAgfSwKICAgIHNldENvbm5lY3RlZDogZnVuY3Rpb24gc2V0Q29ubmVjdGVkKCkgewogICAgICB0aGlzLmNvbm5lY3Rpb24gPSAiY29ubmVjdGVkIjsKICAgIH0sCiAgICBjbGVhckNhbnZhczogZnVuY3Rpb24gY2xlYXJDYW52YXMoKSB7CiAgICAgIHZhciBjdHggPSB0aGlzLiRyZWZzLmNhbnZhcy5nZXRDb250ZXh0KCIyZCIpOwogICAgICBjdHguY2xlYXJSZWN0KDAsIDAsIHRoaXMuY2FudmFzV2lkdGgsIHRoaXMuY2FudmFzSGVpZ2h0KTsKICAgICAgdGhpcy5zb2NrZXQuZW1pdCgiZHJhd2luZyIsIHRoaXMuJHJlZnMuY2FudmFzLnRvRGF0YVVSTCgiaW1hZ2UvcG5nIikpOwogICAgfQogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHRoaXMubWFpbkxvb3AoKTsKCiAgICB2YXIgaW8gPSByZXF1aXJlKCJzb2NrZXQuaW8tY2xpZW50Iik7CgogICAgdGhpcy5zb2NrZXQgPSBpbyhwcm9jZXNzLmVudi5WVUVfQVBQX1NFUlZFUik7CiAgICB0aGlzLnNvY2tldC5lbWl0KCJqb2luLXJvb20iLCB0aGlzLiRyb3V0ZS5wYXJhbXMuaWQpOyAvLyB0aGlzLnNvY2tldC5lbWl0KCJkcmF3aW5nIix0aGlzLiRyb3V0ZS5wYXJhbXMuaWQpOwoKICAgIHRoaXMuc29ja2V0Lm9uKCJkcmF3aW5nIiwgdGhpcy5kcmF3VXBkYXRlKTsKICAgIHRoaXMuc29ja2V0Lm9uKCJqb2luZWQiLCB0aGlzLnNldENvbm5lY3RlZCk7CiAgICB0aGlzLmhhbmRsZVJlc2l6ZSgpOwogICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoInJlc2l6ZSIsIHRoaXMuaGFuZGxlUmVzaXplKTsKICB9Cn07"},{"version":3,"sources":["C:\\Users\\Necdet\\cmrio\\src\\views\\Room.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div id=\"bg\">\r\n    <canvas\r\n      ref=\"canvas\"\r\n      @mousemove=\"draw\"\r\n      @mousedown=\"beginDrawing\"\r\n      @mouseup=\"stopDrawing\"\r\n      @mouseleave=\"cancelDrawing\"\r\n      :width=\"canvasWidth\"\r\n      :height=\"canvasHeight\"\r\n    />\r\n    <div id=\"bar\">\r\n      <div class=\"bar-item\">\r\n        <router-link to=\"/\">home</router-link>|\r\n        <a href=\"#\">Oktomax Business Canvas</a>|\r\n        <button @click=\"clearCanvas\">clear</button>\r\n      </div>\r\n      <div class=\"bar-item\">status : {{ connection }}</div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"Room\",\r\n  data() {\r\n    return {\r\n      socket: null,\r\n      x: 0,\r\n      y: 0,\r\n      canvasWidth: 0,\r\n      canvasHeight: 0,\r\n      isDrawing: false,\r\n      connection: \"connecting\",\r\n      mouse:[{\r\n          \r\n      click: false,\r\n      move: false,\r\n      pos: {x:0, y:0},\r\n      pos_prev: false\r\n  \r\n      }]\r\n    };\r\n  },\r\n  \r\n  methods: {\r\n\r\n  mainLoop() {\r\n      // check if the user is drawing\r\n      if (this.mouse.click && this.mouse.move && this.mouse.pos_prev) {\r\n         // send line to to the server\r\n         this.socket.emit('drawing', { line: [ this.mouse.pos, this.mouse.pos_prev ] });\r\n         this.mouse.move = false;\r\n      }\r\n      this.mouse.pos_prev = {x: this.mouse.pos.x, y: this.mouse.pos.y};\r\n      setTimeout(this.mainLoop, 25);\r\n   },\r\n\r\n\r\n\r\n\r\n\r\n    drawLine(x1, y1, x2, y2) {\r\n      let ctx = this.$refs.canvas.getContext(\"2d\");\r\n      ctx.beginPath();\r\n      ctx.strokeStyle = \"black\";\r\n      ctx.lineWidth = 7;\r\n      ctx.moveTo(x1, y1);\r\n      ctx.lineTo(x2, y2);\r\n      ctx.stroke();\r\n      ctx.closePath();\r\n    },\r\n    draw(e) {\r\n      if (this.isDrawing) {\r\n        this.drawLine(this.x, this.y, e.offsetX, e.offsetY);\r\n        this.x = e.offsetX;\r\n        this.y = e.offsetY;\r\n      }\r\n    },\r\n    beginDrawing(e) {\r\n      this.x = e.offsetX;\r\n      this.y = e.offsetY;\r\n      this.isDrawing = true;\r\n    },\r\n    stopDrawing(e) {\r\n      if (this.isDrawing) {\r\n        this.drawLine(this.x, this.y, e.offsetX, e.offsetY);\r\n        this.isDrawing = false;\r\n        this.socket.emit(\"drawing\", this.$refs.canvas.toDataURL(\"image/png\"));\r\n      }\r\n    },\r\n    cancelDrawing() {\r\n      this.isDrawing = false;\r\n    },\r\n    drawUpdate(url) {\r\n      let image = new Image();\r\n      let ctx = this.$refs.canvas.getContext(\"2d\");\r\n      image.onload = () => {\r\n        ctx.drawImage(image, 0, 0);\r\n      };\r\n      image.src = url;\r\n    },\r\n    handleResize() {\r\n      let state = this.$refs.canvas.toDataURL(\"image/png\");\r\n      this.canvasWidth = window.innerWidth;\r\n      this.canvasHeight = window.innerHeight - 25;\r\n      this.drawUpdate(state);\r\n    },\r\n    setConnected() {\r\n      this.connection = \"connected\";\r\n    },\r\n    clearCanvas() {\r\n      let ctx = this.$refs.canvas.getContext(\"2d\");\r\n      ctx.clearRect(0, 0, this.canvasWidth, this.canvasHeight);\r\n      this.socket.emit(\"drawing\", this.$refs.canvas.toDataURL(\"image/png\"));\r\n    }\r\n  },\r\n  mounted() {\r\n     this.mainLoop();\r\n    const io = require(\"socket.io-client\");\r\n    this.socket = io(process.env.VUE_APP_SERVER);\r\n    this.socket.emit(\"join-room\", this.$route.params.id);\r\n    // this.socket.emit(\"drawing\",this.$route.params.id);\r\n    this.socket.on(\"drawing\", this.drawUpdate);\r\n    this.socket.on(\"joined\", this.setConnected);\r\n    this.handleResize();\r\n    window.addEventListener(\"resize\", this.handleResize);\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n* {\r\n  padding: 0;\r\n  margin: 0;\r\n}\r\n#bg {\r\n  background-color: #111;\r\n  height: 100vh;\r\n  width: 100vw;\r\n}\r\n#bar {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  color: white;\r\n  height: 25px;\r\n}\r\n.bar-item {\r\n  align-items: center;\r\n  padding-left: 5px;\r\n  padding-right: 5px;\r\n}\r\nbutton,\r\na {\r\n  background: none;\r\n  text-decoration: none;\r\n  color: inherit;\r\n  border: none;\r\n  padding: 0;\r\n  padding-right: 5px;\r\n  font: inherit;\r\n  cursor: pointer;\r\n  outline: inherit;\r\n}\r\ncanvas {\r\n  background-color: white;\r\n  display: block;\r\n}\r\n</style>\r\n"],"sourceRoot":""}]}