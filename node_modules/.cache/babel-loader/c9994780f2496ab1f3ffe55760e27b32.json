{"remainingRequest":"C:\\Users\\Necdet\\cmrio\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Necdet\\cmrio\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\Necdet\\cmrio\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!C:\\Users\\Necdet\\cmrio\\src\\views\\Room.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\Necdet\\cmrio\\src\\views\\Room.vue","mtime":1621625233862},{"path":"C:\\Users\\Necdet\\cmrio\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Necdet\\cmrio\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\Necdet\\cmrio\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Necdet\\cmrio\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1616796459000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:ZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJSb29tIiwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgc29ja2V0OiBudWxsLAogICAgICB4OiAwLAogICAgICB5OiAwLAogICAgICBjYW52YXNXaWR0aDogMCwKICAgICAgY2FudmFzSGVpZ2h0OiAwLAogICAgICBpc0RyYXdpbmc6IGZhbHNlLAogICAgICBjb25uZWN0aW9uOiAiY29ubmVjdGluZyIsCiAgICAgIG1vdXNlOiBbewogICAgICAgIGNsaWNrOiBmYWxzZSwKICAgICAgICBtb3ZlOiBmYWxzZSwKICAgICAgICBwb3M6IHsKICAgICAgICAgIHg6IDAsCiAgICAgICAgICB5OiAwCiAgICAgICAgfSwKICAgICAgICBwb3NfcHJldjogZmFsc2UKICAgICAgfV0KICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBtYWluTG9vcDogZnVuY3Rpb24gbWFpbkxvb3AoKSB7CiAgICAgIC8vIGNoZWNrIGlmIHRoZSB1c2VyIGlzIGRyYXdpbmcKICAgICAgaWYgKHRoaXMuaXNEcmF3aW5nKSB7CiAgICAgICAgLy8gc2VuZCBsaW5lIHRvIHRvIHRoZSBzZXJ2ZXIKICAgICAgICB0aGlzLnNvY2tldC5lbWl0KCdkcmF3aW5nJywgewogICAgICAgICAgbGluZTogW3RoaXMuZHJhd0xpbmVdCiAgICAgICAgfSk7CiAgICAgICAgdGhpcy5pc0RyYXdpbmcgPSBmYWxzZTsKICAgICAgfQoKICAgICAgc2V0VGltZW91dCh0aGlzLm1haW5Mb29wLCAyNSk7CiAgICB9LAogICAgZHJhd0xpbmU6IGZ1bmN0aW9uIGRyYXdMaW5lKHgxLCB5MSwgeDIsIHkyKSB7CiAgICAgIHZhciBjdHggPSB0aGlzLiRyZWZzLmNhbnZhcy5nZXRDb250ZXh0KCIyZCIpOwogICAgICBjdHguYmVnaW5QYXRoKCk7CiAgICAgIGN0eC5zdHJva2VTdHlsZSA9ICJibGFjayI7CiAgICAgIGN0eC5saW5lV2lkdGggPSA3OwogICAgICBjdHgubW92ZVRvKHgxLCB5MSk7CiAgICAgIGN0eC5saW5lVG8oeDIsIHkyKTsKICAgICAgY3R4LnN0cm9rZSgpOwogICAgICBjdHguY2xvc2VQYXRoKCk7CiAgICB9LAogICAgZHJhdzogZnVuY3Rpb24gZHJhdyhlKSB7CiAgICAgIGlmICh0aGlzLmlzRHJhd2luZykgewogICAgICAgIHRoaXMuZHJhd0xpbmUodGhpcy54LCB0aGlzLnksIGUub2Zmc2V0WCwgZS5vZmZzZXRZKTsKICAgICAgICB0aGlzLnggPSBlLm9mZnNldFg7CiAgICAgICAgdGhpcy55ID0gZS5vZmZzZXRZOwogICAgICB9CiAgICB9LAogICAgYmVnaW5EcmF3aW5nOiBmdW5jdGlvbiBiZWdpbkRyYXdpbmcoZSkgewogICAgICB0aGlzLnggPSBlLm9mZnNldFg7CiAgICAgIHRoaXMueSA9IGUub2Zmc2V0WTsKICAgICAgdGhpcy5pc0RyYXdpbmcgPSB0cnVlOwogICAgfSwKICAgIHN0b3BEcmF3aW5nOiBmdW5jdGlvbiBzdG9wRHJhd2luZyhlKSB7CiAgICAgIGlmICh0aGlzLmlzRHJhd2luZykgewogICAgICAgIHRoaXMuZHJhd0xpbmUodGhpcy54LCB0aGlzLnksIGUub2Zmc2V0WCwgZS5vZmZzZXRZKTsKICAgICAgICB0aGlzLmlzRHJhd2luZyA9IGZhbHNlOwogICAgICAgIHRoaXMuc29ja2V0LmVtaXQoImRyYXdpbmciLCB0aGlzLiRyZWZzLmNhbnZhcy50b0RhdGFVUkwoImltYWdlL3BuZyIpKTsKICAgICAgfQogICAgfSwKICAgIGNhbmNlbERyYXdpbmc6IGZ1bmN0aW9uIGNhbmNlbERyYXdpbmcoKSB7CiAgICAgIHRoaXMuaXNEcmF3aW5nID0gZmFsc2U7CiAgICB9LAogICAgZHJhd1VwZGF0ZTogZnVuY3Rpb24gZHJhd1VwZGF0ZSh1cmwpIHsKICAgICAgdmFyIGltYWdlID0gbmV3IEltYWdlKCk7CiAgICAgIHZhciBjdHggPSB0aGlzLiRyZWZzLmNhbnZhcy5nZXRDb250ZXh0KCIyZCIpOwoKICAgICAgaW1hZ2Uub25sb2FkID0gZnVuY3Rpb24gKCkgewogICAgICAgIGN0eC5kcmF3SW1hZ2UoaW1hZ2UsIDAsIDApOwogICAgICB9OwoKICAgICAgaW1hZ2Uuc3JjID0gdXJsOwogICAgfSwKICAgIGhhbmRsZVJlc2l6ZTogZnVuY3Rpb24gaGFuZGxlUmVzaXplKCkgewogICAgICB2YXIgc3RhdGUgPSB0aGlzLiRyZWZzLmNhbnZhcy50b0RhdGFVUkwoImltYWdlL3BuZyIpOwogICAgICB0aGlzLmNhbnZhc1dpZHRoID0gd2luZG93LmlubmVyV2lkdGg7CiAgICAgIHRoaXMuY2FudmFzSGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0IC0gMjU7CiAgICAgIHRoaXMuZHJhd1VwZGF0ZShzdGF0ZSk7CiAgICB9LAogICAgc2V0Q29ubmVjdGVkOiBmdW5jdGlvbiBzZXRDb25uZWN0ZWQoKSB7CiAgICAgIHRoaXMuY29ubmVjdGlvbiA9ICJjb25uZWN0ZWQiOwogICAgfSwKICAgIGNsZWFyQ2FudmFzOiBmdW5jdGlvbiBjbGVhckNhbnZhcygpIHsKICAgICAgdmFyIGN0eCA9IHRoaXMuJHJlZnMuY2FudmFzLmdldENvbnRleHQoIjJkIik7CiAgICAgIGN0eC5jbGVhclJlY3QoMCwgMCwgdGhpcy5jYW52YXNXaWR0aCwgdGhpcy5jYW52YXNIZWlnaHQpOwogICAgICB0aGlzLnNvY2tldC5lbWl0KCJkcmF3aW5nIiwgdGhpcy4kcmVmcy5jYW52YXMudG9EYXRhVVJMKCJpbWFnZS9wbmciKSk7CiAgICB9CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdGhpcy5tYWluTG9vcCgpOwoKICAgIHZhciBpbyA9IHJlcXVpcmUoInNvY2tldC5pby1jbGllbnQiKTsKCiAgICB0aGlzLnNvY2tldCA9IGlvKHByb2Nlc3MuZW52LlZVRV9BUFBfU0VSVkVSKTsKICAgIHRoaXMuc29ja2V0LmVtaXQoImpvaW4tcm9vbSIsIHRoaXMuJHJvdXRlLnBhcmFtcy5pZCk7IC8vIHRoaXMuc29ja2V0LmVtaXQoImRyYXdpbmciLHRoaXMuJHJvdXRlLnBhcmFtcy5pZCk7CgogICAgdGhpcy5zb2NrZXQub24oImRyYXdpbmciLCB0aGlzLmRyYXdVcGRhdGUpOwogICAgdGhpcy5zb2NrZXQub24oImpvaW5lZCIsIHRoaXMuc2V0Q29ubmVjdGVkKTsKICAgIHRoaXMuaGFuZGxlUmVzaXplKCk7CiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigicmVzaXplIiwgdGhpcy5oYW5kbGVSZXNpemUpOwogIH0KfTs="},{"version":3,"sources":["C:\\Users\\Necdet\\cmrio\\src\\views\\Room.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div id=\"bg\">\r\n    <canvas\r\n      ref=\"canvas\"\r\n      @mousemove=\"draw\"\r\n      @mousedown=\"beginDrawing\"\r\n      @mouseup=\"stopDrawing\"\r\n      @mouseleave=\"cancelDrawing\"\r\n      :width=\"canvasWidth\"\r\n      :height=\"canvasHeight\"\r\n    />\r\n    <div id=\"bar\">\r\n      <div class=\"bar-item\">\r\n        <router-link to=\"/\">home</router-link>|\r\n        <a href=\"#\">Oktomax Business Canvas</a>|\r\n        <button @click=\"clearCanvas\">clear</button>\r\n      </div>\r\n      <div class=\"bar-item\">status : {{ connection }}</div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"Room\",\r\n  data() {\r\n    return {\r\n      socket: null,\r\n      x: 0,\r\n      y: 0,\r\n      canvasWidth: 0,\r\n      canvasHeight: 0,\r\n      isDrawing: false,\r\n      connection: \"connecting\",\r\n      mouse:[{\r\n          \r\n      click: false,\r\n      move: false,\r\n      pos: {x:0, y:0},\r\n      pos_prev: false\r\n  \r\n      }]\r\n    };\r\n  },\r\n  \r\n  methods: {\r\n\r\n  mainLoop() {\r\n      // check if the user is drawing\r\n      if (this.isDrawing) {\r\n         // send line to to the server\r\n         this.socket.emit('drawing', { line: [ this.drawLine ] });\r\n         this.isDrawing = false;\r\n      }\r\n     \r\n      setTimeout(this.mainLoop, 25);\r\n   },\r\n\r\n\r\n\r\n\r\n\r\n    drawLine(x1, y1, x2, y2) {\r\n      let ctx = this.$refs.canvas.getContext(\"2d\");\r\n      ctx.beginPath();\r\n      ctx.strokeStyle = \"black\";\r\n      ctx.lineWidth = 7;\r\n      ctx.moveTo(x1, y1);\r\n      ctx.lineTo(x2, y2);\r\n      ctx.stroke();\r\n      ctx.closePath();\r\n    },\r\n    draw(e) {\r\n      if (this.isDrawing) {\r\n        this.drawLine(this.x, this.y, e.offsetX, e.offsetY);\r\n        this.x = e.offsetX;\r\n        this.y = e.offsetY;\r\n      }\r\n    },\r\n    beginDrawing(e) {\r\n      this.x = e.offsetX;\r\n      this.y = e.offsetY;\r\n      this.isDrawing = true;\r\n    },\r\n    stopDrawing(e) {\r\n      if (this.isDrawing) {\r\n        this.drawLine(this.x, this.y, e.offsetX, e.offsetY);\r\n        this.isDrawing = false;\r\n        this.socket.emit(\"drawing\", this.$refs.canvas.toDataURL(\"image/png\"));\r\n      }\r\n    },\r\n    cancelDrawing() {\r\n      this.isDrawing = false;\r\n    },\r\n    drawUpdate(url) {\r\n      let image = new Image();\r\n      let ctx = this.$refs.canvas.getContext(\"2d\");\r\n      image.onload = () => {\r\n        ctx.drawImage(image, 0, 0);\r\n      };\r\n      image.src = url;\r\n    },\r\n    handleResize() {\r\n      let state = this.$refs.canvas.toDataURL(\"image/png\");\r\n      this.canvasWidth = window.innerWidth;\r\n      this.canvasHeight = window.innerHeight - 25;\r\n      this.drawUpdate(state);\r\n    },\r\n    setConnected() {\r\n      this.connection = \"connected\";\r\n    },\r\n    clearCanvas() {\r\n      let ctx = this.$refs.canvas.getContext(\"2d\");\r\n      ctx.clearRect(0, 0, this.canvasWidth, this.canvasHeight);\r\n      this.socket.emit(\"drawing\", this.$refs.canvas.toDataURL(\"image/png\"));\r\n    }\r\n  },\r\n  mounted() {\r\n     this.mainLoop();\r\n    const io = require(\"socket.io-client\");\r\n    this.socket = io(process.env.VUE_APP_SERVER);\r\n    this.socket.emit(\"join-room\", this.$route.params.id);\r\n    // this.socket.emit(\"drawing\",this.$route.params.id);\r\n    this.socket.on(\"drawing\", this.drawUpdate);\r\n    this.socket.on(\"joined\", this.setConnected);\r\n    this.handleResize();\r\n    window.addEventListener(\"resize\", this.handleResize);\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n* {\r\n  padding: 0;\r\n  margin: 0;\r\n}\r\n#bg {\r\n  background-color: #111;\r\n  height: 100vh;\r\n  width: 100vw;\r\n}\r\n#bar {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  color: white;\r\n  height: 25px;\r\n}\r\n.bar-item {\r\n  align-items: center;\r\n  padding-left: 5px;\r\n  padding-right: 5px;\r\n}\r\nbutton,\r\na {\r\n  background: none;\r\n  text-decoration: none;\r\n  color: inherit;\r\n  border: none;\r\n  padding: 0;\r\n  padding-right: 5px;\r\n  font: inherit;\r\n  cursor: pointer;\r\n  outline: inherit;\r\n}\r\ncanvas {\r\n  background-color: white;\r\n  display: block;\r\n}\r\n</style>\r\n"],"sourceRoot":""}]}